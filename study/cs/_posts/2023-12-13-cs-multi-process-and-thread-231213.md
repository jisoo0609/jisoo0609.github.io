---
layout: post
title: "Multi Process VS Multi Thread"
date: 2023-12-13 15:42:20 +0900
description: 'CS: 멀티프로세스 VS 멀티스레드'
img: # Add image post (optional)
fig-caption: # Add figcaption (optional)
tags: [multi process, multi thread]
categories: [study, cs]
---
# 멀티프로세스와 멀티스레드의 특징

# 멀티프로세스 &멀티스레드

- 동시에 여러 작업을 수행하는 데 사용되는 개념
- 작업을 어떻게 분리하고 관리하는지에 차이

## 멀티프로세스 (**Multiprocessing**)

- 여러 개의 프로세스가 동시에 실행되는 것
- 각 프로세스는 독립적인 메모리 공간 가짐
- 서로 간의 통신은 별도의 매커니즘 사용해야 함
  - IPC

### 멀티 프로세스

- 운영체제에서 하나의 운영 프로그램에 대하 동시에 여러 개의 프로세스를 실행할 수 있게 하는 기술
- 보통 하나의 프로그램에 대해 하나의 프로세스가 메모리에 실행되지만 부가적인 기능을 위해 여러개의 프로세스를 생성하는 것

![Untitled](/assets/img/posts/study/cs/231213-231215/Untitled.png)

<details>
  <summary>멀티 프로세스 vs 멀티 프로세서</summary>
  <ul>
    <li>프로세스는 프로그램의 실행 상태
      <ul>
        <li>하나의 프로그램에서 여러개의 프로세스를 실행하는 것</li>
      </ul>
    </li>
    <li>프로세서는 CPU의 코어
      <ul>
        <li>여러개의 CPU 코어가 하나의 시스템에서 동시에 실행되는 것</li>
      </ul>
    </li>
  </ul>
</details>
<details>
  <summary>멀티 프로세스의 장 단점</summary>
  <ul>
    <li>장점
      <ul>
        <li>여러개의 자식 프로세스 중 하나에 문제가 발생하면 그 자식 프로세스만 죽는 것 이상으로 다른 영향 확산 X</li>
      </ul>
    </li>
    <li>단점
      <ul>
        <li>Context Switching 과정에서 캐시 메모리 초기화 등 작업이 진행되고 많은 시간이 소모되는 등 오버헤드가 발생</li>
        <li>프로세스는 각각의 독립된 메모리 영역을 할당받았기 때문에 프로세스 사이에서 공유하는 메모리가 없어 Context Switching이 발생하면 캐시에 있는 모든 데이터를 리셋하고 다시 캐시 정보 불러와야 함</li>
      </ul>
    </li>
  </ul>
</details>

## **멀티스레드 (Multithreading)**

- 하나의 프로세스 안에서 여러 개의 스레드가 동시에 실행되는 것
- 프로세스 내의 메모리 공유함 → 데이터 공유 및 통신이 쉬움
- 웹 브라우저에서 여러 탭이 동시에 열려 있는 경우,

  각 탭은 하나의 프로세스에서 동작 가능

  각 탭 안에서 여러 스레드 작동 가능


### 멀티 스레드

- 하나의 프로세스 안에 여러개의 스레드가 있는 것
- 하나의 프로그램에서 두 가지 이상의 동작을 동시에 처리하도록 하는 행위가 가능
- 웹 서버가 대표적인 멀티 스레드 응용프로그램
  - 사용자가 서버 데이터베이스에 자료를 요청하는 동안 브라우저의 다른 기능을 이용할 수 있음
  - 하나의 스레드가 지연되더라도 다른 스레드는 작업 지속 가

![Untitled](/assets/img/posts/study/cs/231213-231215/Untitled%201.png)

<details>
  <summary>멀티 스레드의 장 단점</summary>
  <ul>
    <li>장점
      <ul>
        <li>프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어들어 자원을 효율적으로 관리할 수 있음</li>
        <li>스레드 사이 작업량이 작아 Context Switching이 빠름</li>
        <li>프로세스 내 메모리를 공유하기 때문에 스레드 간 데이터 주고받는 것이 간단하여 시스템 자원 소모 감소</li>
      </ul>
    </li>
    <li>단점
      <ul>
        <li>주의 깊은 설계 필요</li>
        <li>까다로운 디버깅</li>
        <li>다른 프로세스에서 스레드 제어 불가 (프로세스 외부에서 스레드 제어 불가)</li>
        <li>멀티 스레드의 경우 자원 공유 문제 발생
          <ul>
            <li>동기화 문제</li>
            <li>교착 상태</li>
          </ul>
        </li>
        <li>하나의 스레드에 문제가 발생하면 전체 스레드에 영향</li>
      </ul>
    </li>
  </ul>
</details>



## 차이점

- 멀티프로세스는 독립된 메모리 공간을 가지고, 멀티스레드는 메모리를 공유
- 멀티프로세스는 안정성이 높고 독립성이 유지되지만, 자원 소모가 큽니다.
- 멀티스레드는 자원 소모가 적고 응답 시간이 빠르지만, 동기화와 경쟁 조건에 주의해야 합니다.

### 멀티 프로세스 대신 멀티 스레드를 사용하는 이유

- 자원의 효율성 증대
  - 멀티 프로세스로 실행되는 작업을 멀티 스레드로 실행할 경우, 프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어들어 자원을 효율적으로 관리할 수 있음
  - 프로세스 간 Context Switching 시 단순히 CPU 레지스터 교체 뿐 아니라 RAM 과 CPU 사이 캐시 메모리에 대한 데이터까지 초기화되므로 오버헤드가 크기 때문
  - 스레드는 프로세스 내 메모리를 공유하기 때문에 독립적인 프로세스와 달리 스레드 간 데이터를 주고받는 것이 간단해지고 시스템 자원 소모가 줄어들게 됨
- 처리 비용 감소 및 응답 시간 단축
  - 프로세스 간 통신 (IPC) 보다 스레드 간 통신이 비용이 적어 부담이 감소됨
  - 프로세스 간 전환 속도보다 스레드 간 전환 속도가 빠름

### 멀티프로세스 VS 멀티스레드
| 구분               | 멀티 프로세스                     | 멀티 스레드                       |
|------------------|------------------------------|------------------------------|
| 메모리            | 독립된 메모리 공간 보유               | 메모리 공간 공유                  |
| 안정성 및 독립성      | 높음, 독립적                     | 낮음, 동기화 문제 발생 가능            |
| 자원 소모           | 많음                          | 적음                          |
| 시스템 콜 및 자원 관리 | 프로세스 생성과 자원 할당에 시스템 콜 필요 | 스레드 생성 비용이 적고 자원 효율적 관리 가능 |
| Context Switching 비용 | 레지스터, 캐시 초기화 등 오버헤드 큼       | 빠르고 비용 적음                   |
| 통신 비용           | 프로세스 간 통신(IPC) 비용 큼          | 스레드 간 통신 비용 적음             |
| 응답 시간           | 상대적으로 느림                     | 상대적으로 빠름                    |
