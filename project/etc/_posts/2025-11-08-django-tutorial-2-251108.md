---
layout: post
title: "[django] Django Tutorial - TEST CRUD API 2"
date: 2025-11-08 23:32:20 +0900
description: A lightweight Django project demonstrating basic CRUD operations and MVC structure.
img: # Add image post (optional)
fig-caption: # Add figcaption (optional)
categories: [project, etc]
---
# Django REST Frameworkë¥¼ ì‚¬ìš©í•˜ì—¬ ê²Œì‹œíŒ CRUD API
## View setting
### `board/views.py` (ViewSet)
```python
class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all()
    serializer_class = PostSerializer
```
- `viewsets.ModelViewSet` â†’ CRUD ê¸°ëŠ¥ ì „ì²´ ì œê³µ
  - Spring Bootì—ì„œ `@RestController + Repository` + CRUD ë©”ì„œë“œ ëª¨ìŒ ëŠë‚Œ
- `queryset` â†’ ì¡°íšŒí•  ëŒ€ìƒ DB
- `serializer_class` â†’ ë°ì´í„° ì§ë ¬í™”/ì—­ì§ë ¬í™” (JSON â†” DB)

#### (1) `get_serializer_class`
- ëª©ë¡ ì¡°íšŒ(`list`)ë§Œ ê°€ë³ê²Œ **PostListSerializer** ì‚¬ìš©
- ìƒì„¸ ì¡°íšŒ, ìƒì„±, ìˆ˜ì • ë“±ì€ PostSerializer ì‚¬ìš©
- Spring Bootì—ì„œ **ëª©ë¡ìš© DTO / ìƒì„¸ìš© DTO**ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒê³¼ ìœ ì‚¬

#### (2) CRUD ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë“œ
- `list`, `create`, `retrieve`, `update`, `partial_update`, `destroy`
- ì—­í• : HTTP ìš”ì²­ ì²˜ë¦¬ â†’ ëª¨ë¸ + serializer â†’ Response ë°˜í™˜

## URL Routing
### `board/urls.py` (ì•± ë‹¨ìœ„ URL)
```python
router = DefaultRouter()
router.register('board', PostViewSet, basename='post')

urlpatterns = [
    path('v1/', include(router.urls)),
]
```
### `crud_project/urls.py` (í”„ë¡œì íŠ¸ ë‹¨ìœ„ URL)
```python
urlpatterns = [
path('admin/', admin.site.urls),
path('', include('board.urls')),
]
```
- Django í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ ì•± URL í¬í•¨
- `/admin/` â†’ Django Admin
- `/v1/board/...` â†’ board ì•±ì—ì„œ ë¼ìš°íŒ…
- Spring Bootì—ì„œëŠ” í”„ë¡œì íŠ¸ ì „ì—­ `@RequestMapping`ê³¼ ë¹„ìŠ·

## ğŸ”¹ ì „ì²´ íë¦„ ìš”ì•½
1. ëª¨ë¸(Post) â†’ DB êµ¬ì¡° ì •ì˜
2. Serializer(PostSerializer, PostListSerializer) â†’ JSON ë³€í™˜
3. ViewSet(PostViewSet) â†’ HTTP ìš”ì²­ ì²˜ë¦¬
4. Router(board/urls.py) â†’ URL ìë™ ë§¤í•‘
5. ë£¨íŠ¸ urls.py â†’ ì•± URL í¬í•¨
â†’ `/v1/board/...`ì—ì„œ ë°”ë¡œ CRUD í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ âœ…

## API TEST
### ê²Œì‹œê¸€ ìƒì„± (POST)
- `http://127.0.0.1:8000/v1/board/`
```bash
curl -X POST http://localhost:8000/v1/board/ \
  -H "Content-Type: application/json" \
  -d '{
    "title": "ì²« ë²ˆì§¸ ê²Œì‹œê¸€",
    "content": "ê²Œì‹œê¸€ ë‚´ìš©ì…ë‹ˆë‹¤.",
    "author": "í™ê¸¸ë™"
  }'
```
![img.png](/assets/img/posts/project/etc/django/3/img1.png)
![img.png](/assets/img/posts/project/etc/django/3/img2.png)
### ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (GET)
```bash
curl http://localhost:8000/api/posts/
```
![img.png](/assets/img/posts/project/etc/django/3/img3.png)
### ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (GET)
```bash
curl http://localhost:8000/api/posts/1/
```
![img.png](/assets/img/posts/project/etc/django/3/img4.png)
### ê²Œì‹œê¸€ ìˆ˜ì • (PATCH)
```bash
curl -X PATCH http://localhost:8000/api/posts/1/ \
  -H "Content-Type: application/json" \
  -d '{
    "title": "ìˆ˜ì •ëœ ì œëª©"
  }'
```
![img.png](/assets/img/posts/project/etc/django/3/img5.png)
### ê²Œì‹œê¸€ ì‚­ì œ (DELETE)
```bash
curl -X DELETE http://localhost:8000/api/posts/1/
```
![img.png](/assets/img/posts/project/etc/django/3/img6.png)
![img_1.png](/assets/img/posts/project/etc/django/3/img7.png)
